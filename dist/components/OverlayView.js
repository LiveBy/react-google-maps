"use strict";var m=Object.defineProperty;var u=(a,e,n)=>e in a?m(a,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[e]=n;var s=(a,e,n)=>(u(a,typeof e!="symbol"?e+"":e,n),n);Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const c=require("../lodash-6bb8d3a5.cjs"),E=require("../browser-99223509.cjs"),l=require("react"),P=require("../index-d7652fce.cjs"),r=require("../index-5d68b4f3.cjs"),p=require("../utils/MapChildHelper.js"),d=require("../utils/OverlayViewHelper.js"),t=require("../constants-c61a5d3d.cjs");class o extends l.PureComponent{constructor(e,n){super(e,n);const i=new google.maps.OverlayView;i.onAdd=c._.bind(this.onAdd,this),i.draw=c._.bind(this.draw,this),i.onRemove=c._.bind(this.onRemove,this),this.onPositionElement=c._.bind(this.onPositionElement,this),i.setMap(this.context[t.MAP]),this.state={[t.OVERLAY_VIEW]:i}}onAdd(){this.containerElement=document.createElement("div"),this.containerElement.style.position="absolute"}draw(){const{mapPaneName:e}=this.props;E.invariant(!!e,"OverlayView requires either props.mapPaneName or props.defaultMapPaneName but got %s",e),this.state[t.OVERLAY_VIEW].getPanes()[e].appendChild(this.containerElement),this.forceUpdate(this.onPositionElement)}onPositionElement(){const e=this.state[t.OVERLAY_VIEW].getProjection(),n={x:0,y:0,...d.getOffsetOverride(this.containerElement,this.props)},i=d.getLayoutStyles(e,n,this.props);c._.assign(this.containerElement.style,i)}onRemove(){this.containerElement.parentNode.removeChild(this.containerElement),this.containerElement=null,this.forceUpdate()}componentDidMount(){p.componentDidMount(this,this.state[t.OVERLAY_VIEW],h)}componentDidUpdate(e){p.componentDidUpdate(this,this.state[t.OVERLAY_VIEW],h,A,e)}componentWillUnmount(){p.componentWillUnmount(this);const e=this.state[t.OVERLAY_VIEW];e&&(e.setMap(null),e.onAdd=null,e.draw=null,e.onRemove=null)}render(){return!!this.containerElement&&P.ReactDOM.createPortal(l.Children.only(this.props.children),this.containerElement)}getPanes(){return this.state[t.OVERLAY_VIEW].getPanes()}getProjection(){return this.state[t.OVERLAY_VIEW].getProjection()}}s(o,"FLOAT_PANE","floatPane"),s(o,"MAP_PANE","mapPane"),s(o,"MARKER_LAYER","markerLayer"),s(o,"OVERLAY_LAYER","overlayLayer"),s(o,"OVERLAY_MOUSE_TARGET","overlayMouseTarget"),s(o,"propTypes",{mapPaneName:r.PropTypes.string,position:r.PropTypes.object,bounds:r.PropTypes.object,children:r.PropTypes.node.isRequired,getPixelPositionOffset:r.PropTypes.func}),s(o,"contextTypes",{[t.MAP]:r.PropTypes.object,[t.ANCHOR]:r.PropTypes.object});const h={},A={};exports.OverlayView=o;exports.default=o;
